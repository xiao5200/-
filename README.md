# 文件夹大小分析工具文档

## 概述

该工具用于分析指定目录及其子目录中的文件和文件夹的大小，并以合适的单位显示每个文件、文件夹的大小。它会遍历目录中的所有文件和子文件夹，计算并打印每个文件和文件夹的大小，同时展示总大小。

## 功能描述

1. **文件大小格式化**：根据文件大小，自动选择合适的单位（字节、KB、MB、GB）进行展示。
2. **计算目录总大小**：递归计算指定路径下的所有文件和文件夹的总大小。
3. **文件类型识别**：显示文件的扩展名作为文件类型。
4. **排除符号链接**：在计算文件大小时，排除符号链接文件，避免重复计算。
5. **错误处理**：在访问文件夹时，处理常见的错误，如路径不存在（`FileNotFoundError`）或权限不足（`PermissionError`）。

## 代码结构

### 1. `format_size(size)`

**功能**：格式化文件大小，转换为合适的单位（B、KB、MB、GB）。

**参数**：

- `size` (int)：文件的字节数。

**返回值**：

- 格式化后的大小字符串（例如：`"1.23 MB"`）。

**示例**：

```
format_size(1048576)  # 返回 "1.00 MB"
```

### 2. `get_size(start_path)`

**功能**：计算指定路径（包括子目录）下所有文件的总大小。

**参数**：

- `start_path` (str)：目录的路径，表示从该目录开始计算。

**返回值**：

- `total_size` (int)：该路径下所有文件的总大小（单位：字节）。

**示例**：

```
get_size("/path/to/directory")  # 返回目录下所有文件的总大小
```

### 3. `analyze_folder(path)`

**功能**：分析指定路径下的所有文件和文件夹，并打印每个文件或文件夹的大小。此函数还会计算并输出当前目录的总大小。

**参数**：

- `path` (str)：待分析的目录路径。

**返回值**：

- 无返回值。该函数直接打印每个文件和文件夹的大小。

**示例**：

```
analyze_folder("/path/to/directory")  # 打印该目录下所有文件和文件夹的大小
```

### 4. `main()`

**功能**：主函数，提示用户输入路径，并调用`analyze_folder()`进行目录分析。

**返回值**：

- 无返回值。该函数用于执行程序的入口。

**示例**：

```
python


CopyEdit
main()  # 启动程序并输入路径进行分析
```

### 错误处理

- **FileNotFoundError**：路径不存在时，提示用户路径无效。
- **PermissionError**：当程序没有权限访问某些文件或文件夹时，提示权限不足。

## 使用示例

```
bashCopyEdit请输入要分析的目录路径: /home/user
正在分析: /home/user
文件夹: Documents, 大小: 12.34 MB
文件: image.png, 大小: 1.23 MB, 类型: .png
文件: video.mp4, 大小: 2.45 GB, 类型: .mp4
当前文件夹总大小: 3.68 GB
```

## 注意事项

- 如果要分析的目录包含大量文件或深层嵌套的子文件夹，程序的运行时间可能会较长。
- 程序会忽略符号链接文件，以避免重复计算。
- 目前该工具没有提供对文件类型进行深入分析的功能，类型仅通过文件扩展名进行判定。
